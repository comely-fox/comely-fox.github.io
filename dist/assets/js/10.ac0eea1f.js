(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{343:function(t,v,_){"use strict";_.r(v);var o=_(34),n=Object(o.a)({},(function(){var t=this,v=t.$createElement,_=t._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h2",{attrs:{id:"mogondb-匹配-id-更新其他集合文档"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#mogondb-匹配-id-更新其他集合文档"}},[t._v("#")]),t._v(" mogondb 匹配 id 更新其他集合文档")]),t._v(" "),_("p",[_("strong",[t._v("why")]),t._v(" ？")]),t._v(" "),_("ul",[_("li",[t._v('要将 A 集合的 user、os、createTime 字段分别更新到 "C、D、Ｅ、．．．＂集合中。')]),t._v(" "),_("li",[t._v("已知 Ａ 集合中一系列 id 字段值分别与其他集合的 uid 映射。")])]),t._v(" "),_("p",[_("strong",[_("em",[t._v("解决方式")])])]),t._v(" "),_("ol",[_("li",[t._v("先查找 A 集合中的所有文档, 得到所有包含有 id 字段的数据。 可通过 "),_("strong",[t._v("find({})")]),t._v(" 方法")]),t._v(" "),_("li",[t._v("再遍历当前 "),_("strong",[t._v("数据库")]),t._v(" 下的所有集合，得到含有所有 "),_("strong",[t._v("集合名")]),t._v(" 的数组。")]),t._v(" "),_("li",[t._v("再根据得到的数组，分别访问数组中每个集合, 查找到含有 "),_("strong",[t._v("uid")]),t._v(" 字段的数据。 "),_("strong",[_("em",[t._v("注意")])]),t._v(': "要排除掉 A 集合"')]),t._v(" "),_("li",[t._v("再根据 A 集合中的 "),_("strong",[t._v("id")]),t._v(" 与所有集合的 "),_("strong",[t._v("uid")]),t._v(" 作比较，匹配成功就分别更新对应集合的 "),_("strong",[t._v("文档字段")])])]),t._v(" "),_("ul",[_("li",[_("RouterLink",{attrs:{to:"/guide/mongodb/2020-5-4.html"}},[t._v("看代码")])],1)])])}),[],!1,null,null,null);v.default=n.exports}}]);